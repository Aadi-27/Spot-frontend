<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map</title>
    <link href="index.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.js"></script>
 
    <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-map.js?key=CKAmoGBcfGbC5YYBClgWmQAujnGrNQm1"></script>
    <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-geocoding.js?key=CKAmoGBcfGbC5YYBClgWmQAujnGrNQm1"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

</head>
  <body>
    <h1 class="center">Save Bookmark</h1>
      <div class="row">
        <div id="map" class="col s8 push-s1"></div>
        <div class="col s4 push-s2">
          <h4>Marker Name:</h4>
          <form class="searchform #eeeeee grey lighten-2">
            <div class="col">
              <div class="input-field row s1">
                <input type="text" class="locate validate" placeholder="First Date Site"/>
                <label for="first_name" class="active">Location:</label>
              </div>
              <div class="row s1">
                <button class="submit">Search</button>
              </div>
            </div>
          </form>
        </div>
      </div>
  </body>
  <script>
    window.onload = function() {
      let popup = L.popup(),
      geocode,
      map,
      theMarker = {};

      map = L.map('map', {
        layers: MQ.mapLayer(),
        center: [ 38.890385, -77.031989 ],
        zoom: 14
      }).on('click', function(e) {
        popup.setLatLng(e.latlng).openOn(this);

        geocode.reverse(e.latlng);
      })
      geocode = MQ.geocode().on('success', function(e) {
        // let best = e.result.best,
        // latlng = best.latlng;
        // popup.setContent(geocode.describeLocation(best))
        popup.setContent('Yes')
      })
      map.on('click', function(e) {
        lat = e.latlng.lat;
        long = e.latlng.lng;
        console.log('clicked point coordinates lat:'+ lat + 'and long:' + long )

        // clear existing marker,
        if(theMarker !== undefined) {
          map.removeLayer(theMarker);
        };
        theMarker = L.marker([lat,long])
        .addTo(map)
      })

      // let map = L.map('map', {
      // layers: MQ.mapLayer()
      // });

      // MQ.geocode({})
      // .search('San Francisco, CA').on('success', function(e) {
        // let best = e.result.best,
        // latlng = best.latlng;

      //   map.setView(latlng, 12);

        // L.marker([ latlng.lat, latlng.lng ])
        // .addTo(map)
        // .bindPopup('<strong>' + best.adminArea5 + ', ' + best.adminArea3 + '</strong> is located here.')
        // .openPopup()
    //   })
    }
    
  </script>
</html>